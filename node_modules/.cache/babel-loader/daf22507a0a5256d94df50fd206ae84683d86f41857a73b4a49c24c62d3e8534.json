{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\WebstormProjects\\\\newAiuaPhotographer\\\\src\\\\components\\\\Profile.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link, useNavigate } from \"react-router-dom\";\nimport '../styles/Profile.css';\nimport MyEvents from \"./MyEvents\";\nimport axios from \"axios\";\nimport CreateEvent from \"./CreateEvent\";\nimport EventPage from \"./EventPage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Profile = () => {\n  _s();\n  const [user, setUser] = useState({});\n  const [events, setEvents] = useState([]);\n  const [showModal, setShowModal] = useState(false);\n  const [selectedEvent, setSelectedEvent] = useState(null);\n  const navigate = useNavigate();\n\n  // טוען את המידע של המשתמש מה-localStorage\n  useEffect(() => {\n    getUser();\n    getEvents();\n  }, []);\n  const getUser = () => {\n    axios.get(\"http://localhost:8000/get-user\", {\n      withCredentials: true\n    }).then(response => {\n      debugger;\n      setUser(response.data);\n    });\n  };\n  const getEvents = () => {\n    axios.get(\"http://localhost:8000/get-events\", {\n      withCredentials: true\n    }).then(response => {\n      debugger;\n      setEvents(response.data);\n    });\n  };\n  const sortEventsByDate = events => {\n    return events.sort((a, b) => {\n      const [dayA, monthA, yearA] = a.date.split('/').map(Number);\n      const [dayB, monthB, yearB] = b.date.split('/').map(Number);\n      const dateA = new Date(yearA, monthA - 1, dayA); // month is 0-indexed\n      const dateB = new Date(yearB, monthB - 1, dayB);\n      return dateA - dateB; // Sort in ascending order\n    });\n  };\n  const handleLockEvent = () => {\n    const confirmed = window.confirm(\"Are you sure you want to lock this event? This action cannot be undone.\");\n    if (confirmed) {\n      axios.get(\"http://localhost:8000/lock-event?event-id=\" + selectedEvent.id).then(response => {\n        console.log(response.data);\n        debugger;\n        updateLockedEvent(response.data.event);\n        setSelectedEvent(response.data.event);\n      });\n    }\n  };\n  const updateLockedEvent = event => {\n    setEvents(prevEvents => prevEvents.map(ev => ev.id === event.id ? event : ev));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-header-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"event-name\",\n        children: [user.name, \"\\uD83D\\uDD89 \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"event-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"event-date\",\n          children: user.phone\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontWeight: \"bold\"\n          },\n          children: \" \\xB7 \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"event-location\",\n          children: user.email\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      id: \"create-event\",\n      className: \"event-button\",\n      onClick: () => setShowModal(true),\n      children: \"Create Event\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MyEvents, {\n      events: sortEventsByDate(events),\n      selectedEvent: selectedEvent,\n      setSelectedEvent: setSelectedEvent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), showModal && /*#__PURE__*/_jsxDEV(CreateEvent, {\n      setShowModal: setShowModal,\n      setEvents: setEvents\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 16\n    }, this), selectedEvent !== null && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [selectedEvent.is_open && /*#__PURE__*/_jsxDEV(\"button\", {\n        id: \"lock-event\",\n        className: \"event-button\",\n        onClick: handleLockEvent,\n        children: \"Lock Event\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(EventPage, {\n        event: selectedEvent\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n};\n_s(Profile, \"0p1BNHjHVxB255Uyez5OpE+xXLs=\", false, function () {\n  return [useNavigate];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","MyEvents","axios","CreateEvent","EventPage","jsxDEV","_jsxDEV","Profile","_s","user","setUser","events","setEvents","showModal","setShowModal","selectedEvent","setSelectedEvent","navigate","getUser","getEvents","get","withCredentials","then","response","data","sortEventsByDate","sort","a","b","dayA","monthA","yearA","date","split","map","Number","dayB","monthB","yearB","dateA","Date","dateB","handleLockEvent","confirmed","window","confirm","id","console","log","updateLockedEvent","event","prevEvents","ev","className","children","name","fileName","_jsxFileName","lineNumber","columnNumber","phone","style","fontWeight","email","onClick","is_open","_c","$RefreshReg$"],"sources":["C:/Users/DELL/WebstormProjects/newAiuaPhotographer/src/components/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport '../styles/Profile.css';\r\nimport MyEvents from \"./MyEvents\";\r\nimport axios from \"axios\";\r\nimport CreateEvent from \"./CreateEvent\";\r\nimport EventPage from \"./EventPage\";\r\n\r\n\r\nconst Profile = () => {\r\n    const [user, setUser] = useState({});\r\n    const [events, setEvents] = useState([]);\r\n    const [showModal, setShowModal] = useState(false);\r\n\r\n    const [selectedEvent,setSelectedEvent] = useState(null)\r\n\r\n    const navigate = useNavigate();\r\n\r\n    // טוען את המידע של המשתמש מה-localStorage\r\n    useEffect(() => {\r\n        getUser()\r\n        getEvents()\r\n    }, []);\r\n\r\n    const getUser =()=>{\r\n        axios.get(\"http://localhost:8000/get-user\",{withCredentials: true})\r\n            .then((response)=>{\r\n                debugger\r\n                setUser(response.data)\r\n            })\r\n\r\n    }\r\n\r\n    const getEvents =()=>{\r\n        axios.get(\"http://localhost:8000/get-events\",{withCredentials: true})\r\n            .then((response)=>{\r\n                debugger\r\n                setEvents(response.data)\r\n            })\r\n\r\n    }\r\n\r\n\r\n    const sortEventsByDate = (events) => {\r\n        return events.sort((a, b) => {\r\n            const [dayA, monthA, yearA] = a.date.split('/').map(Number);\r\n            const [dayB, monthB, yearB] = b.date.split('/').map(Number);\r\n\r\n            const dateA = new Date(yearA, monthA - 1, dayA); // month is 0-indexed\r\n            const dateB = new Date(yearB, monthB - 1, dayB);\r\n\r\n            return dateA - dateB; // Sort in ascending order\r\n        });\r\n    };\r\n\r\n    const handleLockEvent =()=>{\r\n        const confirmed = window.confirm(\"Are you sure you want to lock this event? This action cannot be undone.\");\r\n        if (confirmed){\r\n            axios.get(\"http://localhost:8000/lock-event?event-id=\"+selectedEvent.id)\r\n                .then((response)=>{\r\n                    console.log(response.data)\r\n                    debugger\r\n                    updateLockedEvent(response.data.event)\r\n                    setSelectedEvent(response.data.event)\r\n\r\n                })\r\n        }\r\n\r\n    }\r\n\r\n    const updateLockedEvent = (event) => {\r\n        setEvents(prevEvents =>\r\n            prevEvents.map(ev => ev.id === event.id ? event : ev)\r\n        );\r\n    };\r\n\r\n\r\n    return (\r\n        <div className={\"main-container\"}>\r\n            <div className={\"profile-header-container\"}>\r\n\r\n                <h1 className=\"event-name\">{user.name}🖉 </h1>\r\n\r\n                <div className=\"event-details\">\r\n                    <span className=\"event-date\">{user.phone}</span>\r\n                    <span style={{ fontWeight: \"bold\" }}> · </span>\r\n                    <span className=\"event-location\">{user.email}</span>\r\n                </div>\r\n            </div>\r\n            <button id={\"create-event\"} className={\"event-button\"} onClick={() => setShowModal(true)}>Create Event</button>\r\n\r\n            <MyEvents events={sortEventsByDate(events)} selectedEvent={selectedEvent} setSelectedEvent={setSelectedEvent}/>\r\n            {showModal && (\r\n               <CreateEvent setShowModal={setShowModal} setEvents={setEvents}/>\r\n            )}\r\n            {\r\n                selectedEvent !== null &&\r\n                <div>\r\n                    {\r\n                        selectedEvent.is_open &&\r\n                        <button id={\"lock-event\"} className={\"event-button\"} onClick={handleLockEvent}>Lock Event</button>\r\n                    }\r\n                    <EventPage event={selectedEvent}/>\r\n                </div>\r\n\r\n            }\r\n\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,IAAI,EAAEC,WAAW,QAAQ,kBAAkB;AACpD,OAAO,uBAAuB;AAC9B,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,WAAW,MAAM,eAAe;AACvC,OAAOC,SAAS,MAAM,aAAa;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAGpC,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAClB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGb,QAAQ,CAAC,CAAC,CAAC,CAAC;EACpC,MAAM,CAACc,MAAM,EAAEC,SAAS,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACgB,SAAS,EAAEC,YAAY,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC;EAEjD,MAAM,CAACkB,aAAa,EAACC,gBAAgB,CAAC,GAAGnB,QAAQ,CAAC,IAAI,CAAC;EAEvD,MAAMoB,QAAQ,GAAGjB,WAAW,CAAC,CAAC;;EAE9B;EACAF,SAAS,CAAC,MAAM;IACZoB,OAAO,CAAC,CAAC;IACTC,SAAS,CAAC,CAAC;EACf,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMD,OAAO,GAAEA,CAAA,KAAI;IACfhB,KAAK,CAACkB,GAAG,CAAC,gCAAgC,EAAC;MAACC,eAAe,EAAE;IAAI,CAAC,CAAC,CAC9DC,IAAI,CAAEC,QAAQ,IAAG;MACd;MACAb,OAAO,CAACa,QAAQ,CAACC,IAAI,CAAC;IAC1B,CAAC,CAAC;EAEV,CAAC;EAED,MAAML,SAAS,GAAEA,CAAA,KAAI;IACjBjB,KAAK,CAACkB,GAAG,CAAC,kCAAkC,EAAC;MAACC,eAAe,EAAE;IAAI,CAAC,CAAC,CAChEC,IAAI,CAAEC,QAAQ,IAAG;MACd;MACAX,SAAS,CAACW,QAAQ,CAACC,IAAI,CAAC;IAC5B,CAAC,CAAC;EAEV,CAAC;EAGD,MAAMC,gBAAgB,GAAId,MAAM,IAAK;IACjC,OAAOA,MAAM,CAACe,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;MACzB,MAAM,CAACC,IAAI,EAAEC,MAAM,EAAEC,KAAK,CAAC,GAAGJ,CAAC,CAACK,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACC,MAAM,CAAC;MAC3D,MAAM,CAACC,IAAI,EAAEC,MAAM,EAAEC,KAAK,CAAC,GAAGV,CAAC,CAACI,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,CAACC,MAAM,CAAC;MAE3D,MAAMI,KAAK,GAAG,IAAIC,IAAI,CAACT,KAAK,EAAED,MAAM,GAAG,CAAC,EAAED,IAAI,CAAC,CAAC,CAAC;MACjD,MAAMY,KAAK,GAAG,IAAID,IAAI,CAACF,KAAK,EAAED,MAAM,GAAG,CAAC,EAAED,IAAI,CAAC;MAE/C,OAAOG,KAAK,GAAGE,KAAK,CAAC,CAAC;IAC1B,CAAC,CAAC;EACN,CAAC;EAED,MAAMC,eAAe,GAAEA,CAAA,KAAI;IACvB,MAAMC,SAAS,GAAGC,MAAM,CAACC,OAAO,CAAC,yEAAyE,CAAC;IAC3G,IAAIF,SAAS,EAAC;MACVzC,KAAK,CAACkB,GAAG,CAAC,4CAA4C,GAACL,aAAa,CAAC+B,EAAE,CAAC,CACnExB,IAAI,CAAEC,QAAQ,IAAG;QACdwB,OAAO,CAACC,GAAG,CAACzB,QAAQ,CAACC,IAAI,CAAC;QAC1B;QACAyB,iBAAiB,CAAC1B,QAAQ,CAACC,IAAI,CAAC0B,KAAK,CAAC;QACtClC,gBAAgB,CAACO,QAAQ,CAACC,IAAI,CAAC0B,KAAK,CAAC;MAEzC,CAAC,CAAC;IACV;EAEJ,CAAC;EAED,MAAMD,iBAAiB,GAAIC,KAAK,IAAK;IACjCtC,SAAS,CAACuC,UAAU,IAChBA,UAAU,CAACjB,GAAG,CAACkB,EAAE,IAAIA,EAAE,CAACN,EAAE,KAAKI,KAAK,CAACJ,EAAE,GAAGI,KAAK,GAAGE,EAAE,CACxD,CAAC;EACL,CAAC;EAGD,oBACI9C,OAAA;IAAK+C,SAAS,EAAE,gBAAiB;IAAAC,QAAA,gBAC7BhD,OAAA;MAAK+C,SAAS,EAAE,0BAA2B;MAAAC,QAAA,gBAEvChD,OAAA;QAAI+C,SAAS,EAAC,YAAY;QAAAC,QAAA,GAAE7C,IAAI,CAAC8C,IAAI,EAAC,eAAG;MAAA;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAE9CrD,OAAA;QAAK+C,SAAS,EAAC,eAAe;QAAAC,QAAA,gBAC1BhD,OAAA;UAAM+C,SAAS,EAAC,YAAY;UAAAC,QAAA,EAAE7C,IAAI,CAACmD;QAAK;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAChDrD,OAAA;UAAMuD,KAAK,EAAE;YAAEC,UAAU,EAAE;UAAO,CAAE;UAAAR,QAAA,EAAC;QAAG;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAC/CrD,OAAA;UAAM+C,SAAS,EAAC,gBAAgB;UAAAC,QAAA,EAAE7C,IAAI,CAACsD;QAAK;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eACNrD,OAAA;MAAQwC,EAAE,EAAE,cAAe;MAACO,SAAS,EAAE,cAAe;MAACW,OAAO,EAAEA,CAAA,KAAMlD,YAAY,CAAC,IAAI,CAAE;MAAAwC,QAAA,EAAC;IAAY;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,eAE/GrD,OAAA,CAACL,QAAQ;MAACU,MAAM,EAAEc,gBAAgB,CAACd,MAAM,CAAE;MAACI,aAAa,EAAEA,aAAc;MAACC,gBAAgB,EAAEA;IAAiB;MAAAwC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CAAC,EAC9G9C,SAAS,iBACPP,OAAA,CAACH,WAAW;MAACW,YAAY,EAAEA,YAAa;MAACF,SAAS,EAAEA;IAAU;MAAA4C,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAC,CACjE,EAEG5C,aAAa,KAAK,IAAI,iBACtBT,OAAA;MAAAgD,QAAA,GAEQvC,aAAa,CAACkD,OAAO,iBACrB3D,OAAA;QAAQwC,EAAE,EAAE,YAAa;QAACO,SAAS,EAAE,cAAe;QAACW,OAAO,EAAEtB,eAAgB;QAAAY,QAAA,EAAC;MAAU;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAEtGrD,OAAA,CAACF,SAAS;QAAC8C,KAAK,EAAEnC;MAAc;QAAAyC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAIT,CAAC;AAEd,CAAC;AAACnD,EAAA,CApGID,OAAO;EAAA,QAOQP,WAAW;AAAA;AAAAkE,EAAA,GAP1B3D,OAAO;AAsGb,eAAeA,OAAO;AAAC,IAAA2D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}